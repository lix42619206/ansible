[mysqld]
bind-address={{ ansible_host }}
port=3306
pid-file    = /var/run/mysqld/mysqld.pid
socket      = /var/lib/mysql/mysql.sock
datadir     = /var/lib/mysql
symbolic-links=0
skip_name_resolve
server-id=1
log_bin=mysql-bin
binlog_format=mixed
expire_logs_days=30
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
default-time_zone='+8:00'
skip-character-set-client-handshake
max_connections=8000
max_connect_errors=1000
open_files_limit=65535
table_open_cache=128
max_allowed_packet=320M
binlog_cache_size=1M
max_heap_table_size=8M
tmp_table_size=16M
read_buffer_size=2M
read_rnd_buffer_size=8M
innodb_file_per_table=1
back_log=300
wait_timeout=36000
sort_buffer_size=16M
join_buffer_size=16M
query_cache_size=128M
query_cache_limit=4M
transaction_isolation=REPEATABLE-READ
thread_stack=512K
innodb_buffer_pool_size=4G
innodb_thread_concurrency=16
innodb_log_file_size=512M
innodb_log_buffer_size=16M
innodb_log_files_in_group=3
innodb_lock_wait_timeout=1200
innodb_large_prefix=on
innodb_file_format = Barracuda
log-queries-not-using-indexes
skip-character-set-client-handshake
slow_query_log=1
long_query_time=2
slow_query_log_file=/var/lib/mysql/mysql-slow.log
lower_case_table_names=1
sql_mode=NO_ENGINE_SUBSTITUTION
log_bin_trust_function_creators=1
event_scheduler=1
